# yaml-language-server: $schema=https://raw.githubusercontent.com/jesseduffield/lazygit/master/schema/config.json
git:
  parseEmoji: true
  paging:
    colorArg: always
    pager: delta --dark --paging=never
customCommands:
  - key: "<C-c>"
    context: "files"
    command: 'git commit -m "$(echo {{.Form.Row}} | cut -d" " -f1) {{.Form.Message}}"'
    prompts:
      - type: "input"
        title: "Select gitmoji"
        key: "Row"
        suggestions:
          command: 'cat "$XDG_DATA_HOME/git/emoji.json" | jq -r ".gitmojis[] | [.code,.name,.description] | @tsv" | sed "s/[\t\(\)]/ /g" | emojify'
      - type: "input"
        title: "Commit message"
        key: "Message"
  - key: "p"
    context: "localBranches"
    command: 'git pull --rebase'
  - key: "<C-l>"
    context: "global"
    command: "gh auth switch 2>&1 | awk '{print $NF}' > $HOME/.local/state/gh/active-user"
  - key: "<C-c>"
    context: "localBranches"
    command: "gh pr create --title '{{.Form.Title}}' --body '{{.Form.Body}}'"
    prompts:
      - type: "input"
        title: "Select commit message"
        key: "Title"
        suggestions:
          command: "git log `git show-branch --list | tail -1 | awk -F'[]~^[]' '{print $2}'`..HEAD --format='%C(auto)%h%d %s %C(black)%C(bold)%cr' | grep -oE '[a-f0-9]{7}' | xargs -I{} git --no-pager log -1 {} --format='%s'"
      - type: "input"
        title: "Description"
        key: "Body"
  - key: "<C-v>"
    context: "localBranches"
    command: "gh pr view --web"
